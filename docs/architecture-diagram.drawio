<mxfile host="app.diagrams.net" modified="2026-01-31T04:00:00.000Z" agent="FAIRHire" version="24.0.0" type="device">
  <diagram id="fairhire-architecture" name="System Architecture">
    <mxGraphModel dx="1600" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="FAIRHire AI — System Architecture" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=24;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="600" height="40" as="geometry" />
        </mxCell>

        <!-- Browser / User Layer -->
        <mxCell id="browser-group" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;dashPattern=5 5;" vertex="1" parent="1">
          <mxGeometry x="350" y="80" width="900" height="70" as="geometry" />
        </mxCell>
        <mxCell id="browser" value="&#x1f4bb; Browser / Recruiter&#10;http://&lt;host&gt;:3047" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="95" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- Arrow Browser to Frontend -->
        <mxCell id="arrow-browser-fe" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="browser" target="frontend">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Docker Compose Boundary -->
        <mxCell id="docker-boundary" value="Docker Compose Network (fairhire-net)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#666666;dashed=1;dashPattern=8 8;fontSize=12;fontStyle=1;verticalAlign=top;align=left;spacingTop=5;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="180" width="1520" height="960" as="geometry" />
        </mxCell>

        <!-- ═══════════════════ FRONTEND ═══════════════════ -->
        <mxCell id="frontend" value="React Frontend&#10;(TypeScript + Node 20)&#10;Port 3047 → 3000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="640" y="220" width="320" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fe-pages" value="Pages: Dashboard | Jobs | Candidates | Fairness | Interviews | Activity" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="640" y="285" width="320" height="20" as="geometry" />
        </mxCell>

        <!-- Arrow Frontend to Backend -->
        <mxCell id="arrow-fe-be" value="REST API&#10;+ WebSocket" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="frontend" target="backend">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ═══════════════════ BACKEND ═══════════════════ -->
        <mxCell id="backend" value="Django Backend&#10;(Gunicorn + WSGI)&#10;Port 8046" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="370" width="320" height="70" as="geometry" />
        </mxCell>
        <mxCell id="be-detail" value="REST API | Admin | Serializers | Filters | CORS" style="text;html=1;align=center;verticalAlign=middle;fontSize=9;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="640" y="435" width="320" height="20" as="geometry" />
        </mxCell>

        <!-- ═══════════════════ AGENT PIPELINE ═══════════════════ -->
        <mxCell id="agent-group" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="500" width="1360" height="220" as="geometry" />
        </mxCell>
        <mxCell id="agent-title" value="Multi-Agent Evaluation Pipeline (Orchestrator)" style="text;html=1;align=left;verticalAlign=top;fontSize=13;fontStyle=1;fontColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="110" y="505" width="400" height="25" as="geometry" />
        </mxCell>

        <!-- Agent 1: Parser -->
        <mxCell id="agent-parser" value="1. Resume Parser&#10;Agent&#10;&#10;Extract skills,&#10;education, exp,&#10;PII, gaps" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;fontStyle=0;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="120" y="545" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="parser-llm" value="LLM" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="545" width="35" height="25" as="geometry" />
        </mxCell>

        <!-- Agent 2: Guardrail -->
        <mxCell id="agent-guardrail" value="2. Guardrail&#10;Agent&#10;&#10;Experience check&#10;Age ≥ 18&#10;Skills match&#10;Education" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="340" y="545" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="guardrail-rule" value="Rules" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="545" width="35" height="25" as="geometry" />
        </mxCell>

        <!-- Agent 3: Scorer -->
        <mxCell id="agent-scorer" value="3. Scoring&#10;Agent&#10;&#10;7-component&#10;weighted rubric&#10;+ confidence" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="560" y="545" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="scorer-llm" value="LLM" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="545" width="35" height="25" as="geometry" />
        </mxCell>

        <!-- Agent 4: Summary -->
        <mxCell id="agent-summary" value="4. Summary&#10;Agent&#10;&#10;Pros / Cons&#10;Action (Accept&#10;Reject/Review)&#10;Reasoning" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="780" y="545" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="summary-llm" value="LLM" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="545" width="35" height="25" as="geometry" />
        </mxCell>

        <!-- Agent 5: Bias Auditor -->
        <mxCell id="agent-bias" value="5. Bias Auditor&#10;Agent&#10;&#10;Name swaps&#10;Proxy flips&#10;Adversarial tests&#10;PII redaction" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1000" y="545" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="bias-llm" value="LLM" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1160" y="545" width="35" height="25" as="geometry" />
        </mxCell>

        <!-- Responsible AI Badge -->
        <mxCell id="rai-badge" value="Responsible AI&#10;Framework" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1240" y="565" width="120" height="70" as="geometry" />
        </mxCell>

        <!-- Agent flow arrows -->
        <mxCell id="flow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;strokeWidth=2;strokeColor=#b85450;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-parser" target="agent-guardrail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="flow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;strokeWidth=2;strokeColor=#b85450;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-guardrail" target="agent-scorer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="flow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;strokeWidth=2;strokeColor=#b85450;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-scorer" target="agent-summary">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="flow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;strokeWidth=2;strokeColor=#b85450;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-summary" target="agent-bias">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrow Backend to Agent Pipeline -->
        <mxCell id="arrow-be-agents" value="Orchestrator" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#d6b656;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="backend" target="agent-group">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ═══════════════════ DATA LAYER ═══════════════════ -->
        <mxCell id="postgres" value="PostgreSQL 16&#10;Port 5446 → 5432&#10;&#10;Candidates, Jobs,&#10;Evaluations, Probes,&#10;Activity Logs" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;fontStyle=0;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="100" y="780" width="180" height="130" as="geometry" />
        </mxCell>

        <mxCell id="redis" value="Redis 7&#10;Port 6346 → 6379&#10;&#10;Celery Broker&#10;Channel Layer&#10;Cache" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="340" y="780" width="180" height="130" as="geometry" />
        </mxCell>

        <!-- Arrow Backend to DB -->
        <mxCell id="arrow-be-pg" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="backend" target="postgres">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="640" y="405" /><mxPoint x="50" y="405" /><mxPoint x="50" y="845" /></Array>
          </mxGeometry>
        </mxCell>

        <!-- Arrow Backend to Redis -->
        <mxCell id="arrow-be-redis" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#d6b656;" edge="1" parent="1" source="backend" target="redis">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="640" y="420" /><mxPoint x="430" y="420" /><mxPoint x="430" y="780" /></Array>
          </mxGeometry>
        </mxCell>

        <!-- ═══════════════════ ASYNC WORKERS ═══════════════════ -->
        <mxCell id="celery-worker" value="Celery Worker&#10;4 Concurrent&#10;&#10;Queues:&#10;default, agents" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="580" y="800" width="160" height="100" as="geometry" />
        </mxCell>

        <mxCell id="celery-beat" value="Celery Beat&#10;&#10;Scheduled Tasks&#10;Periodic Jobs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="780" y="800" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- Arrow Redis to Workers -->
        <mxCell id="arrow-redis-worker" value="Tasks" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;strokeColor=#d6b656;dashed=1;" edge="1" parent="1" source="redis" target="celery-worker">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-redis-beat" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;strokeColor=#d6b656;dashed=1;" edge="1" parent="1" source="redis" target="celery-beat">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ═══════════════════ MCP SERVER ═══════════════════ -->
        <mxCell id="mcp-server" value="MCP Server&#10;(Model Context Protocol)&#10;Port 8146&#10;&#10;8 Tools (JSON-RPC)&#10;2 Resources" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;fontStyle=0;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1060" y="770" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="mcp-ext" value="External&#10;LLM Agents&#10;(Claude, GPT)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="1060" y="930" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arrow-mcp-ext" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;strokeColor=#9673a6;dashed=1;" edge="1" parent="1" source="mcp-server" target="mcp-ext">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ═══════════════════ A2A SERVER ═══════════════════ -->
        <mxCell id="a2a-server" value="A2A Server&#10;(Agent-to-Agent)&#10;Port 8246&#10;&#10;6 Agent Cards&#10;Sync + Async Tasks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1310" y="770" width="200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="a2a-ext" value="External&#10;Agent Systems" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="1310" y="930" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="arrow-a2a-ext" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;strokeColor=#9673a6;dashed=1;" edge="1" parent="1" source="a2a-server" target="a2a-ext">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrow Backend to MCP -->
        <mxCell id="arrow-be-mcp" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;strokeColor=#9673a6;" edge="1" parent="1" source="backend" target="mcp-server">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="1000" y="405" /><mxPoint x="1000" y="750" /><mxPoint x="1160" y="750" /></Array>
          </mxGeometry>
        </mxCell>
        <!-- Arrow Backend to A2A -->
        <mxCell id="arrow-be-a2a" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=1;strokeColor=#9673a6;" edge="1" parent="1" source="backend" target="a2a-server">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="1020" y="405" /><mxPoint x="1020" y="740" /><mxPoint x="1410" y="740" /></Array>
          </mxGeometry>
        </mxCell>

        <!-- ═══════════════════ LLM API ═══════════════════ -->
        <mxCell id="llm-api" value="OpenAI / LLM API&#10;(gpt-4o-mini)" style="shape=cloud;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1250" y="380" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-agents-llm" value="API Calls" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#9673a6;dashed=1;" edge="1" parent="1" source="agent-group" target="llm-api">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="1350" y="500" /></Array>
          </mxGeometry>
        </mxCell>

        <!-- ═══════════════════ LEGEND ═══════════════════ -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#999999;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="1040" width="600" height="80" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="Legend:" style="text;html=1;align=left;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="1045" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="55" y="1075" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg1t" value="Frontend" style="text;html=1;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="80" y="1072" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="145" y="1075" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg2t" value="Backend / Async" style="text;html=1;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="170" y="1072" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="265" y="1075" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg3t" value="AI Agents" style="text;html=1;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="290" y="1072" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="355" y="1075" width="20" height="15" as="geometry" />
        </mxCell>
        <mxCell id="leg4t" value="Protocols (MCP/A2A/LLM)" style="text;html=1;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="380" y="1072" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg5" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;size=5;" vertex="1" parent="1">
          <mxGeometry x="525" y="1070" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg5t" value="Data Stores" style="text;html=1;align=left;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="550" y="1072" width="70" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>

  <diagram id="agent-pipeline" name="Agent Pipeline Detail">
    <mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <mxCell id="p-title" value="FAIRHire — Agent Pipeline Detail" style="text;html=1;align=center;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="30" as="geometry" />
        </mxCell>

        <!-- Resume Input -->
        <mxCell id="resume-in" value="Resume&#10;(PDF/DOCX/TXT/JSON)" style="shape=document;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="60" y="100" width="150" height="80" as="geometry" />
        </mxCell>

        <!-- Step 1: PII Redaction -->
        <mxCell id="pii" value="Pre-Processing&#10;&#10;PII Scan&#10;Injection Scrub&#10;Text Normalization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="90" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- Step 2: Parser -->
        <mxCell id="p-parser" value="Parser Agent&#10;&#10;→ Structured JSON&#10;→ Skills, Education&#10;→ Experience, Gaps&#10;→ Certifications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="510" y="80" width="180" height="120" as="geometry" />
        </mxCell>

        <!-- Step 3: Guardrail -->
        <mxCell id="p-guard" value="Guardrail Agent&#10;&#10;✓ Experience ≥ min years&#10;✓ Age ≥ 18&#10;✓ ≥20% skill match&#10;✓ Education present" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="80" width="190" height="120" as="geometry" />
        </mxCell>

        <!-- Guardrail Decision -->
        <mxCell id="guard-decision" value="Pass?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1020" y="100" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="guard-fail" value="REJECTED&#10;(guardrail_failed)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1170" y="110" width="150" height="50" as="geometry" />
        </mxCell>

        <!-- Step 4: Scorer -->
        <mxCell id="p-scorer" value="Scoring Agent&#10;&#10;7 Rubric Components:&#10;IC Exp (0.25) | Mgmt (0.20)&#10;ML/Ops (0.15) | Impact (0.10)&#10;Edu Rigor (0.12) | GPA (0.08)&#10;Quality (0.10)&#10;&#10;→ Weighted Score 0.0 – 1.0&#10;→ Confidence Level" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="160" y="280" width="250" height="180" as="geometry" />
        </mxCell>

        <!-- Step 5: Summary -->
        <mxCell id="p-summary" value="Summary Agent&#10;&#10;→ Pros (strengths)&#10;→ Cons (weaknesses)&#10;→ Suggested Action&#10;   (Accept / Reject / Review)&#10;→ Detailed Reasoning&#10;→ Risk Factors&#10;→ Interview Recommendations" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="480" y="280" width="250" height="180" as="geometry" />
        </mxCell>

        <!-- Step 6: Bias Auditor -->
        <mxCell id="p-bias" value="Bias Auditor Agent&#10;&#10;Name Swaps:&#10;  Emily↔Emilio, Aisha↔Adam...&#10;Proxy Flips:&#10;  Stanford↔Community College&#10;  Mgmt↔IC, 3mo↔5yr break&#10;Adversarial Injection Test&#10;&#10;Flag if |delta| &gt; 0.15&#10;Risk: Low / Medium / High" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="800" y="270" width="260" height="200" as="geometry" />
        </mxCell>

        <!-- RAI Shield -->
        <mxCell id="rai-shield" value="Responsible&#10;AI&#10;Framework" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1130" y="330" width="130" height="80" as="geometry" />
        </mxCell>

        <!-- Output -->
        <mxCell id="output" value="Final Candidate Report&#10;&#10;Score | Confidence | Action&#10;Pros | Cons | Reasoning&#10;Bias Flags | Risk Level&#10;Human Review Ready" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="540" width="300" height="120" as="geometry" />
        </mxCell>

        <!-- Arrows -->
        <mxCell id="a1" style="strokeWidth=2;strokeColor=#666;" edge="1" parent="1" source="resume-in" target="pii"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="a2" style="strokeWidth=2;strokeColor=#666;" edge="1" parent="1" source="pii" target="p-parser"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="a3" style="strokeWidth=2;strokeColor=#666;" edge="1" parent="1" source="p-parser" target="p-guard"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="a4" style="strokeWidth=2;strokeColor=#666;" edge="1" parent="1" source="p-guard" target="guard-decision"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="a4f" value="No" style="strokeWidth=2;strokeColor=#b85450;fontStyle=1;" edge="1" parent="1" source="guard-decision" target="guard-fail"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="a4p" value="Yes" style="strokeWidth=2;strokeColor=#82b366;fontStyle=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="guard-decision" target="p-scorer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="1060" y="240" /><mxPoint x="285" y="240" /></Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="a5" style="strokeWidth=2;strokeColor=#666;" edge="1" parent="1" source="p-scorer" target="p-summary"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="a6" style="strokeWidth=2;strokeColor=#666;" edge="1" parent="1" source="p-summary" target="p-bias"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="a7" style="strokeWidth=2;strokeColor=#666;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="p-bias" target="output">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"><mxPoint x="930" y="520" /><mxPoint x="550" y="520" /></Array>
          </mxGeometry>
        </mxCell>

        <!-- Human Review -->
        <mxCell id="human" value="Human Reviewer&#10;&#10;Shortlist / Reject / Review&#10;Notes + Decision" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="400" y="710" width="300" height="80" as="geometry" />
        </mxCell>
        <mxCell id="a8" style="strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="output" target="human"><mxGeometry relative="1" as="geometry" /></mxCell>

        <!-- Pipeline stages -->
        <mxCell id="stages" value="Pipeline Stages: NEW → PARSING → PARSED → GUARDRAIL_CHECK → SCORING → SCORED → SUMMARIZED → BIAS_AUDIT → REVIEWED → SHORTLISTED → INTERVIEW → OFFER → HIRED | REJECTED" style="text;html=1;align=center;fontSize=9;fontColor=#666666;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="100" y="830" width="1200" height="30" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>

  <diagram id="data-model" name="Data Model">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <mxCell id="dm-title" value="FAIRHire — Data Model" style="text;html=1;align=center;fontSize=20;fontStyle=1;fontColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="400" height="30" as="geometry" />
        </mxCell>

        <!-- Department -->
        <mxCell id="dm-dept" value="Department&#10;─────────&#10;id: UUID (PK)&#10;name: varchar&#10;description: text&#10;created_at: datetime" style="shape=table;startSize=30;container=0;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=left;resizeLast=0;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="60" y="80" width="200" height="120" as="geometry" />
        </mxCell>

        <!-- JobPosition -->
        <mxCell id="dm-job" value="JobPosition&#10;──────────&#10;id: UUID (PK)&#10;department: FK → Department&#10;title: varchar&#10;description: text&#10;requirements: text&#10;experience_level: enum&#10;min/max_experience_years: int&#10;salary_min/max: decimal&#10;rubric_weights: JSON&#10;status: enum (OPEN/CLOSED/DRAFT)" style="shape=table;startSize=30;container=0;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=left;resizeLast=0;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="340" y="60" width="260" height="220" as="geometry" />
        </mxCell>

        <!-- Candidate -->
        <mxCell id="dm-cand" value="Candidate&#10;─────────&#10;id: UUID (PK)&#10;job_position: FK → JobPosition&#10;first_name / last_name: varchar&#10;email: varchar&#10;resume_text: text&#10;resume_file: file&#10;parsed_data: JSON&#10;guardrail_results: JSON&#10;scoring_results: JSON&#10;summary_results: JSON&#10;bias_audit_results: JSON&#10;overall_score: float&#10;confidence: float&#10;stage: enum (18 stages)&#10;suggested_action: varchar&#10;guardrail_passed: bool&#10;reviewer_notes: text" style="shape=table;startSize=30;container=0;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=left;resizeLast=0;html=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="680" y="60" width="250" height="360" as="geometry" />
        </mxCell>

        <!-- AgentExecution -->
        <mxCell id="dm-exec" value="AgentExecution&#10;──────────────&#10;id: UUID (PK)&#10;candidate: FK → Candidate&#10;agent_type: enum&#10;status: enum&#10;duration_seconds: float&#10;llm_tokens_used: int&#10;input_data: JSON&#10;output_data: JSON&#10;error_message: text" style="shape=table;startSize=30;container=0;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=left;resizeLast=0;html=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="60" y="440" width="220" height="210" as="geometry" />
        </mxCell>

        <!-- BiasProbe -->
        <mxCell id="dm-probe" value="BiasProbe&#10;─────────&#10;id: UUID (PK)&#10;candidate: FK → Candidate&#10;probe_type: enum&#10;scenario: varchar&#10;original_score: float&#10;probe_score: float&#10;delta: float&#10;flagged: bool&#10;explanation: text" style="shape=table;startSize=30;container=0;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=left;resizeLast=0;html=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="340" y="440" width="220" height="210" as="geometry" />
        </mxCell>

        <!-- Interview -->
        <mxCell id="dm-interview" value="Interview&#10;─────────&#10;id: UUID (PK)&#10;candidate: FK → Candidate&#10;interview_type: enum&#10;interviewer: FK → User&#10;scheduled_at: datetime&#10;status: enum&#10;rating: int&#10;ai_questions: JSON&#10;notes: text" style="shape=table;startSize=30;container=0;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=left;resizeLast=0;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="620" y="460" width="220" height="210" as="geometry" />
        </mxCell>

        <!-- ActivityLog -->
        <mxCell id="dm-activity" value="ActivityLog&#10;──────────&#10;id: UUID (PK)&#10;candidate: FK → Candidate&#10;event_type: varchar&#10;message: text&#10;metadata: JSON&#10;created_at: datetime" style="shape=table;startSize=30;container=0;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=1;align=left;resizeLast=0;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="900" y="480" width="220" height="160" as="geometry" />
        </mxCell>

        <!-- Relationships -->
        <mxCell id="rel1" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#6c8ebf;fontStyle=1;" edge="1" parent="1" source="dm-dept" target="dm-job"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="rel2" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#6c8ebf;fontStyle=1;" edge="1" parent="1" source="dm-job" target="dm-cand"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="rel3" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#b85450;fontStyle=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="dm-cand" target="dm-exec">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="805" y="430" /><mxPoint x="170" y="430" /></Array></mxGeometry>
        </mxCell>
        <mxCell id="rel4" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#b85450;fontStyle=1;" edge="1" parent="1" source="dm-cand" target="dm-probe">
          <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="805" y="435" /><mxPoint x="450" y="435" /></Array></mxGeometry>
        </mxCell>
        <mxCell id="rel5" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#6c8ebf;fontStyle=1;" edge="1" parent="1" source="dm-cand" target="dm-interview">
          <mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="rel6" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeWidth=2;strokeColor=#d6b656;fontStyle=1;" edge="1" parent="1" source="dm-cand" target="dm-activity">
          <mxGeometry relative="1" as="geometry" /></mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
